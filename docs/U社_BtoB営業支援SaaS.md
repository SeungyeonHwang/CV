# 🏢 U社 - BtoB営業支援SaaS

## 基本情報

| 項目 | 詳細 |
|------|------|
| **期間** | 2021年2月 - 2022年2月 |
| **職種** | バックエンドエンジニア |
| **チーム規模** | 4名（アジャイル開発） |
| **役割** | バックエンドエンジニア - API開発・パフォーマンス最適化担当 |

---

## 技術スタック

```
Kotlin • Spring Boot • PostgreSQL • Redis • Elasticsearch • Azure • GraphQL
MS Dynamics 365 • Salesforce • CRM連携
```

---

## プロジェクト概要

BtoB営業支援SaaSプロダクトのバックエンド開発を担当しました。大企業ユーザーが扱う大量データに対して、**Elasticsearch**の導入と**Redis SDIFF**を活用した最適化により、検索速度80%改善、ストレージ使用率57%削減を達成。また、SalesforceやMS Dynamics 365とのCRM連携機能も実装しました。

---

## 主な実装と成果

### 1️⃣ バッチ処理の最適化

#### 📊 大容量バッチ処理の最適化

**課題**  
大容量データのバッチ処理がDBに大きな負荷をかけ、ストレージ使用率が70%を超える状態

**解決策**
- **Redis SDIFFを活用**: 差分比較処理をメモリ上で実行し、DBアクセスを削減
- **優先度別バッチ分割**: 重要度に応じた処理優先度の実装
- **フォールバック機構**: メモリ障害時でも処理を継続できる仕組みを実装

**結果**  
DBストレージ使用率を70%から30%に削減（57%改善）

### 2️⃣ 検索APIのパフォーマンス改善

#### 🔍 大規模データ検索の高速化

**課題**  
大企業ユーザーが扱う数百万件のデータ検索が5秒以上かかる状態

**解決策**
- **Elasticsearchを導入**: 全文検索エンジンによる高速化とオートスケーリング実装
- **データ同期パイプライン構築**: PostgreSQLからLogstash経由でElasticsearchへのリアルタイム同期
- **クエリ最適化**: Bool Queryを活用した複雑な検索条件の最適化

**結果**  
レスポンスタイムを5秒から1秒以下に短縮（80%改善）

### 3️⃣ CRMプラットフォーム連携

#### 🔗 MS Dynamics 365・Salesforce統合

**課題**  
営業チームがSalesforceとMS Dynamics 365を併用しており、データの二重入力が発生

**解決策**
- **MS Dynamics 365連携**: Web APIを使用したリアルタイムデータ同期の実装
- **Salesforce連携**: Sales Cloud APIを用いた営業データの統合
- **双方向同期機構**: 両プラットフォーム間のデータ整合性を保つ仕組みを構築

**結果**  
営業プロセスの自動化により、データ入力工数60%削減

---

## 技術的な工夫・改善

<table>
<tr>
<td valign="top" width="50%">

### 📊 データ処理最適化
- **Redis SDIFF**: 効率的な差分処理実装
- **バッチ処理**: 負荷分散とエラーハンドリング
- **メモリ管理**: 大容量データ処理の最適化

</td>
<td valign="top" width="50%">

### 🔍 検索システム構築
- **Elasticsearch**: 高速全文検索システム
- **データ同期**: リアルタイム同期パイプライン
- **GraphQL API**: 型安全なAPI設計・実装

### 🔍 Elasticsearch高度活用

| 機能 | 実装内容 |
|------|----------|
| **Multi-tenancy対応** | インデックス分離による顧客データ隔離 |
| **カスタムアナライザー** | 日本語形態素解析（kuromoji）による精度向上 |
| **オートスケーリング** | クラウド環境でElasticsearchノードの自動スケール管理を実装 |
| **負荷分散** | トラフィック増加時に自動的にノード追加、コスト最適化も実現 |
| **スナップショット戦略** | S3連携による定期バックアップ自動化 |
| **クラスター監視** | Elastic Stack（ELK）による包括的監視 |
| **検索最適化** | Fuzzy Query・Synonyms対応で検索精度向上 |
| **インデックス管理** | Index Lifecycle Managementで自動最適化 |

### 🔴 Redis活用による差分処理最適化

| 領域 | 実装内容 |
|------|----------|
| **SDIFF活用** | 大量ID処理の依存性を排除、キーの差分処理でDB負荷を完全回避 |
| **処理高速化** | 数百万件のID比較を秒単位で処理、DBアクセスゼロで実現 |
| **キャッシュ戦略** | Redis SDIFFによる大容量データのインメモリ差分処理で依存性を排除 |
| **バッチ処理最適化** | 従来のJOIN処理をRedis差分演算に置き換え、処理時間90%削減 |
| **メモリ管理** | 適切なTTL設定による効率的なメモリ使用 |
| **エラーハンドリング** | フォールバック処理により障害時も継続処理可能 |

</td>
</tr>
<tr>
<td valign="top" width="50%">

### 🔗 CRM統合開発
- **MS Dynamics 365**: Web API連携実装
- **Salesforce**: Sales Cloud統合
- **データ整合性**: 双方向同期システム

</td>
<td valign="top" width="50%">

### ☁️ クラウドプラットフォーム
- **Azure連携**: エンタープライズ認証統合
- **API Gateway**: 統一的なAPI管理
- **自動化**: CI/CD パイプライン構築

</td>
</tr>
</table>

### 🚀 DevOps・SRE実践

| 領域 | 実装内容 |
|------|----------|
| **SLO定義** | 可用性目標設定と継続的監視 |
| **カナリアデプロイ** | 段階的リリースによるリスク最小化 |
| **障害対応** | PagerDutyによる24/7アラート体制 |
| **キャパシティプランニング** | 成長に応じた自動スケーリング |
| **監視体制** | Datadog APMによる包括的監視 |
| **ポストモーテム** | 障害から学ぶ文化の確立 |

---

## 数値成果・インパクト

```diff
+ 🔍 検索高速化により顧客の業務効率が向上、契約継続率90%以上を達成
+ 💰 ストレージ最適化で月額インフラコストを約100万円削減（57%削減）
+ 📊 Redis活用により同時アクセス数が3倍に増加してもレスポンス維持
+ ⚡ Multi-tenant対応により新規顧客のオンボーディング期間を1週間→1日に短縮
+ 🔗 CRM統合により営業データ入力工数60%削減、営業活動時間を創出
+ 👥 Elasticsearch導入を技術リードし、チームの検索技術スキル向上に貢献
+ 📈 システム安定化により顧客満足度スコアが20%向上
```